--  To generate the missing step definitions:
--      xreq --fill-steps-in generated_steps features/*.feature
--
--  This will create the files:
--      features/step_definitions/generated_steps.ad[bs]
--
--  Then you can generate test sources for this project
--      xreq --quiet --progress --executable xreq_tests --step features/step_definitions --output obj features/*.feature
--
--  This will create the files:
--      features/tests/*.ad[bs]
--
--  Then you can build the project
--      gprbuild -p -P xreq_tests.gpr
--
--  And run tests
--      ./obj/xreq_tests
--

with "xreqlib";
with "../oranges/oranges";

project Xreq_Tests is

   for Languages use ("Ada", "feature");
   for Main use ("xreq_tests");
   for Source_Dirs use ("obj", "features/step_definitions", "features");
   for Object_Dir use "obj";

   package Naming is
     for Body_Suffix ("feature") use ".feature";
   end Naming;

   package Builder is
      for Executable ("test_suite.adb") use "xreq_tests";
   end Builder;

   package Compiler is
      for Default_Switches ("ada") use ("-O0", "-g", "-gnatQ", "-gnatw.X");
      for Driver ("feature") use "";
   end Compiler;

   package Binder is
      for Default_Switches ("ada") use ("-E");
   end Binder;

end Xreq_Tests;

